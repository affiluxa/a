<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Affiluxa Certificate</title>

<style>
@page { size: A4 portrait; }

body{
  margin:0;
  background:#e9e6df;
  font-family:"Times New Roman",serif;
}

.page{
  width:210mm;
  height:297mm;
  margin:auto;
  background:#fff;
  padding:25mm 20mm;
  position:relative;
  box-sizing:border-box;
  border:12px solid #c9a244;
  outline:6px solid #123562;
}

.page::after{
  content:"";
  position:absolute;
  inset:10mm;
  border:1.6px solid #000;
  pointer-events:none;
}

.image-watermark{
  position:absolute;
  top:50%;
  left:50%;
  width:120mm;
  opacity:.1;
  transform:translate(-50%,-50%);
}

.header{
  text-align:center;
  margin-top:10mm;
}

.univ-name{
  font-size:28px;
  font-weight:bold;
  color:#8b0000;
}

.univ-name-hindi{
  font-size:22px;
  font-weight:bold;
  color:#8b0000;
}

.sub-header{
  font-size:16px;
  margin-top:3px;
}

.degree-title{
  margin-top:18mm;
  font-size:26px;
  font-weight:bold;
  text-decoration:underline;
  text-align:center;
}

.degree-title-hindi{
  font-size:22px;
  font-weight:bold;
  text-align:center;
}

.content{
  margin-top:16mm;
  font-size:17px;
  line-height:1.6;
  text-align:justify;
}

.bold{
  font-weight:bold;
  text-transform:uppercase;
}

.footer{
  margin-top:40px;
  display:flex;
  justify-content:space-between;
  font-size:14px;
}
</style>
</head>

<body>

<div class="page">



<div class="header">
  <div class="univ-name">AFFILUXA</div>
  <div class="univ-name-hindi">تیز کرتا ہے</div>
  <div class="sub-header">(Skill Development Initiative)</div>
</div>

<div class="degree-title">DIPLOMA CERTIFICATE</div>
<div class="degree-title-hindi">ڈپلومہ سرٹیفکیٹ</div>

<div class="content">
This is to certify that <span class="bold" id="studentName">__________</span>,
bearing Enrollment No. <span class="bold" id="enrollNo">__________</span>,
has successfully completed the course
<span class="bold" id="courseName">__________</span>
during the Academic Year
<span class="bold" id="academicYear">__________</span>.
</div>

<div class="footer">
  <div>
    <p>Place: <span id="place">—</span></p>
    <p>Date: <span id="issueDate">—</span></p>
  </div>
  <div>
    <p><b>Authorized Signatory</b></p>
    <p>Syed Mehedi Raza Naqvi</p>
    
  </div>
</div>

</div>

<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
/* CONFIG */
const SUPABASE_URL = "https://vorksjzwswizlvntqtnr.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvcmtzanp3c3dpemx2bnRxdG5yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NDk3NDksImV4cCI6MjA4MjQyNTc0OX0.HHN-5NUKpUTtMBXOCpsUUtG5vH-tmw5KR7kRso1p624";

/* CLIENT */
const supabaseClient = supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

/* READ CERT ID */
const params = new URLSearchParams(window.location.search);
const certId = params.get("cert");

if (!certId) {
  alert("Certificate ID missing");
}

/* LOAD CERTIFICATE */
async function loadCertificate() {
  const { data, error } = await supabaseClient
    .from("students")
    .select("*")
    .eq("certificate_id", certId)
    .single();

  if (error || !data) {
    alert("Certificate not found");
    return;
  }

  document.getElementById("studentName").innerText = data.full_name;
  document.getElementById("enrollNo").innerText = data.certificate_id;
  document.getElementById("courseName").innerText = data.course;
  document.getElementById("academicYear").innerText = "2024 – 2025";
  document.getElementById("place").innerText = data.city || "-";
  document.getElementById("issueDate").innerText =
    new Date(data.created_at).toLocaleDateString("en-GB");
}

loadCertificate();
</script>

</body>
</html>